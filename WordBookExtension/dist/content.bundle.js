(()=>{"use strict";const t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var e,o=new Uint8Array(16);function n(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(o)}for(var r=[],i=0;i<256;++i)r.push((i+256).toString(16).slice(1));const d=function(e,o,i){if(t.randomUUID&&!o&&!e)return t.randomUUID();var d=(e=e||{}).random||(e.rng||n)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,o){i=i||0;for(var a=0;a<16;++a)o[i+a]=d[a];return o}return function(t,e=0){return(r[t[e+0]]+r[t[e+1]]+r[t[e+2]]+r[t[e+3]]+"-"+r[t[e+4]]+r[t[e+5]]+"-"+r[t[e+6]]+r[t[e+7]]+"-"+r[t[e+8]]+r[t[e+9]]+"-"+r[t[e+10]]+r[t[e+11]]+r[t[e+12]]+r[t[e+13]]+r[t[e+14]]+r[t[e+15]]).toLowerCase()}(d)};document.addEventListener("click",(function(t){let e=window.getSelection().toString().trim(),o=document.getElementById("floatingButton");if(o&&o.remove(),console.log(`select: ${e}`),e.length>0){console.log("button created.");let o=Object.assign(document.createElement("button"),{id:"floatingButton",textContent:"save",style:`position: absolute; top: ${t.pageY}px; left: ${t.pageX}px; z-index: 1000;`});o.addEventListener("mousedown",(function(){let t={uuid:d(),name:e,desc:"my name is "+e+".",timestamp:(new Date).toISOString()},n="new";chrome.storage.local.get({wordList:[],categoryList:{}},(function(e){let o=e.wordList,r=e.categoryList;0==r.hasOwnProperty(n)&&(r[n]=[]),r[n].push(t.uuid),o.push(t),chrome.storage.local.set({wordList:o,categoryList:r},(function(){console.log(`Saved: ${JSON.stringify(t)} into ${n}.`)}))})),o.remove()})),document.body.appendChild(o)}})),window.addEventListener("scroll",(function(){}))})();